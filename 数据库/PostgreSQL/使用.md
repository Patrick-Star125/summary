**简单记一记**

# 编译

环境是Ubuntu20.04 LTS



问题

1. 缺少库，装上去也没用 缺`bison`、`xmllint`、`flex`

# 基础信息

登录PG

> psql -h localhost -U postgres

查看PG版本

> SELECT version();

查看表的基本信息

> SELECT * FROM pg_database;

查看用户基本信息

> select * from pg_user;



# 用户

创建用户

> CREATE USER john WITH PASSWORD 'password123';

修改用户

> ALTER USER john WITH PASSWORD 'newpassword';

创建角色

> CREATE ROLE role_name [OPTIONS]
>
> `OPTIONS` 是可选的附加选项。你可以根据需要添加和修改选项。
>
> 以下是一些常用的角色选项：
>
> - `LOGIN`：允许角色登录到数据库，默认为启用。
> - `PASSWORD 'password'`：设置角色的密码。
> - `SUPERUSER`：将角色指定为超级用户，具有完全权限。
> - `CREATEDB`：允许角色创建新数据库。
> - `CREATEROLE`：允许角色创建新角色。
> - `INHERIT`：允许角色继承权限。

授予角色

> GRANT admin TO john;

查看权限(用户/角色/表)

> \du john
>
> \dg admin
>
> \dp employees



# 表命令

查看表数量和大小

~~~sql
SELECT table_catalog,
       table_schema,
       table_name,
       pg_size_pretty(pg_total_relation_size('"' || table_schema || '"."' || table_name || '"')) AS total_size
FROM information_schema.tables
WHERE table_type = 'BASE TABLE';
~~~

查看某个表的字段

> \d table_name
>
> \d+ table_name



# 索引命令

查看索引数量

~~~sql
SELECT schemaname, tablename, indexname
FROM pg_indexes
WHERE schemaname NOT LIKE 'pg_%'
  AND schemaname != 'information_schema';
~~~



